<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Scorer - Archery Scoring App</title>
<link rel="stylesheet" href="style.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  /* Basic dark theme styling */
  body {
    background-color: #181f2a;
    color: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
  }
  .container {
    max-width: 400px;
    margin: 40px auto;
    padding: 15px;
  }
  .screen {
    display: none;
  }
  .screen.active {
    display: block;
  }
  h1, h2, h3 {
    text-align: center;
  }
  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin: 8px 0 15px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
  }
  button {
    width: 100%;
    padding: 12px 0;
    margin: 8px 0;
    border-radius: 10px;
    border: none;
    background: linear-gradient(90deg, #3984f7, #52c3ff);
    color: #fff;
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1rem;
    transition: background 0.3s ease;
  }
  button:hover {
    background: linear-gradient(90deg, #1a62d1, #3e9bf7);
  }
  #target {
    display: block;
    margin: 0 auto 15px;
    background-color: #222;
    border-radius: 50%;
    box-shadow: 0 0 12px 3px rgba(255,255,255,0.1);
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #232c42;
    border-radius: 10px;
    overflow: hidden;
  }
  th, td {
    padding: 10px;
    border: 1px solid #2a344b;
    text-align: center;
  }
  th {
    background-color: #394a79;
  }
  .message {
    color: #e74c3c;
    text-align: center;
    margin-bottom: 15px;
    font-weight: 600;
  }
</style>
</head>
<body>

<div class="container">
  <!-- Login Screen -->
  <div id="loginPage" class="screen active">
    <h1>üèπ My Scorer üèπ</h1>
    <input type="text" id="username" placeholder="Enter your name" />
    <input type="email" id="email" placeholder="Email Address" />
    <input type="password" id="password" placeholder="Password" />
    <select id="role">
      <option value="archer">Archer</option>
      <option value="coach">Coach</option>
      <option value="judge">Judge</option>
    </select>
    <button id="signupBtn">Sign Up</button>
    <button id="loginBtn">Login</button>
    <div id="loginMessage" class="message"></div>
  </div>

  <!-- Menu Screen -->
  <div id="menuScreen" class="screen">
    <h1>üèπ My Scorer üèπ</h1>
    <p id="greeting" style="text-align:center; font-size:1rem; margin-bottom: 25px;"></p>
    <button id="menuStartBtn">Start Session</button>
    <button id="menuHistoryBtn">My History</button>
    <button id="menuLogoutBtn">Logout</button>
    <button id="menuToggleBtn">Toggle Theme</button>
  </div>

  <!-- Coach Dashboard -->
  <div id="coachDashboard" class="screen">
    <h2>Coach Dashboard</h2>
    <div id="archerListContainer">
      <h3>Archers</h3>
      <ul id="archerList" style="list-style:none; padding-left:0;"></ul>
    </div>
    <div id="archerSessionsContainer" style="margin-top:20px;">
      <h3>
        Sessions for <span id="selectedArcherName">Select an archer</span>
      </h3>
      <div id="archerSessionList"></div>
    </div>
    <div id="sessionDetailContainer" style="margin-top:20px; display:none;">
      <h3>Session Details</h3>
      <div id="sessionDetailSummary"></div>
      <div id="sessionDetailTable"></div>
      <canvas id="sessionDetailScoreChart" width="400" height="200"></canvas>
      <canvas id="sessionDetailDispersionChart" width="400" height="200" style="margin-top:20px;"></canvas>
      <button id="sessionDetailCloseBtn">Close</button>
    </div>
    <button id="coachBackBtn" style="margin-top:20px;">Back to Menu</button>
  </div>

  <!-- Setup Screen -->
  <div id="setup" class="screen">
    <h2>Setup Session</h2>
    <label for="bowStyle">Bow Style</label>
    <select id="bowStyle"></select>
    <label for="distance">Distance</label>
    <select id="distance"></select>
    <label for="targetFace">Target Face</label>
    <select id="targetFace"></select>
    <label for="arrowsPerEnd">Arrows Per End</label>
    <input type="number" id="arrowsPerEnd" value="6" min="1" max="12" />
    <label for="endsCount">Number of Ends</label>
    <input type="number" id="endsCount" value="6" min="1" max="30" />
    <button id="startSessionBtn">Start Session</button>
    <button id="viewHistoryBtn">View History</button>
    <button id="logoutBtn">Logout</button>
  </div>

  <!-- Scoring Screen -->
  <div id="scoring" class="screen">
    <h2>End <span id="currentEnd">1</span></h2>
    <canvas id="target" width="300" height="300"></canvas>
    <p>Tap the target to score</p>
    <div id="scoresList"></div>
    <div id="scoresTotal">Total: 0</div>
    <button id="undoArrowBtn">Undo Last Arrow</button>
    <button id="nextEndBtn">Next End</button>
    <button id="endSessionBtn" style="display:none;">End Session</button>
  </div>

  <!-- History Screen -->
  <div id="historyScreen" class="screen">
    <h2>History</h2>
    <div id="historyList"></div>
    <button id="historyBackBtn">Back to Menu</button>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="script.js"></script>
</body>
</html>
